<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BĐS Tốt - Trang chủ</title>
    
    <link rel="icon" href="favicon.png" type="image/png">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/menu.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/listing.css">
   
</head>
<body>

    <div id="menu-overlay" class="menu-overlay"></div>
    <header class="header-wrapper">
        <div class="header-footer-limiter">
            <div class="site-header">
                <button class="hamburger-button" id="hamburger-button" aria-label="Mở menu">
                    <span class="bar"></span><span class="bar"></span><span class="bar"></span>
                </button>
                <a href="index.html" class="logo-link"><img src="assets/images/logo.png" alt="Logo BĐS Tốt" class="logo"></a>
                <nav class="main-nav" id="main-nav">
                    <ul id="main-menu-list"></ul>
                </nav>
                <div class="header-actions">
                    <a href="favorites.html" class="header-favorite-btn" aria-label="Danh sách yêu thích">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"></path></svg>
                        <span class="favorite-counter">0</span>
                    </a>
                    <a href="#" class="search-button-new" aria-label="Tìm kiếm">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16"><path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/></svg>
                    </a>
                </div>
            </div>
        </div>
    </header>
    <div id="cct-mega-menu">
    <div class="menu-panel-overlay"></div>
    <div class="menu-panel-columns">
        <div class="menu-panel-col col-1">
            <h4>Loại hình</h4>
            <ul id="mega-menu-col-1-list"></ul>
        </div>
        <div class="menu-panel-col col-2">
            <h4>Khu vực</h4>
            <ul id="mega-menu-col-2-list"></ul>
        </div>
        <div class="menu-panel-col col-3">
            <h4>Dự án nổi bật</h4>
            <div id="mega-menu-col-3-content"></div>
        </div>
    </div>
    </div>

    <main>
        <section class="banner-section">
             <div class="banner-content">
                <div class="banner-text">
                    <h2>Giải Quyết Mọi Nỗi Lo, An Tâm Mua Nhà</h2>
                    <div class="worry-list">
    <div class="worry-item">
        <p class="worry-title">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#53b966" width="24px" height="24px">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM9.29 16.29L5.7 12.7c-.39-.39-.39-1.02 0-1.41.39-.39 1.02-.39 1.41 0L10 14.17l6.88-6.88c.39-.39 1.02-.39 1.41 0 .39.39.39 1.02 0 1.41L10.7 16.29c-.39.39-1.02.39-1.41 0z"/>
                </svg>
           Thông tin xác thực & Đánh giá khách quan
        </p>
        <p class="worry-detail">Dữ liệu được kiểm chứng và góc nhìn đa chiều giúp bạn đưa ra quyết định đúng đắn</p>
    </div>
    <div class="worry-item">
        <p class="worry-title">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#53b966" width="24px" height="24px">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM9.29 16.29L5.7 12.7c-.39-.39-.39-1.02 0-1.41.39-.39 1.02-.39 1.41 0L10 14.17l6.88-6.88c.39-.39 1.02-.39 1.41 0 .39.39.39 1.02 0 1.41L10.7 16.29c-.39.39-1.02.39-1.41 0z"/>
                </svg>
            Minh bạch pháp lý, rõ ràng tiến độ dự án
        </p>
        <p class="worry-detail">An tâm tuyệt đối với tình trạng pháp lý và tiến độ thi công được cập nhật liên tục</p>
    </div>
    <div class="worry-item">
        <p class="worry-title">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#53b966" width="24px" height="24px">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM9.29 16.29L5.7 12.7c-.39-.39-.39-1.02 0-1.41.39-.39 1.02-.39 1.41 0L10 14.17l6.88-6.88c.39-.39 1.02-.39 1.41 0 .39.39.39 1.02 0 1.41L10.7 16.29c-.39.39-1.02.39-1.41 0z"/>
                </svg>
            Đội ngũ chuyên gia & Kinh nghiệm thực chiến
        </p>
        <p class="worry-detail">Đồng hành cùng bạn là các chuyên gia am hiểu sâu sắc thị trường và nhu cầu của bạn</p>
    </div>
     <div class="worry-item">
        <p class="worry-title">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#53b966" width="24px" height="24px">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM9.29 16.29L5.7 12.7c-.39-.39-.39-1.02 0-1.41.39-.39 1.02-.39 1.41 0L10 14.17l6.88-6.88c.39-.39 1.02-.39 1.41 0 .39.39.39 1.02 0 1.41L10.7 16.29c-.39.39-1.02.39-1.41 0z"/>
                </svg>
            Kinh nghiệm từ 1000+ giao dịch thành công
        </p>
        <p class="worry-detail">Là minh chứng cho sự tin cậy và năng lực đã hỗ trợ hàng ngàn khách hàng tìm được tổ ấm</p>
    </div>
</div>
                </div>
                <div class="banner-image">
                    <img src="assets/images/banner.png" alt="An tâm mua chung cư">
                </div>
            </div>
        </section>

        <section class="experts-section">
            <div class="content-limiter">
                <div class="section-header">
                    <h2>Góc nhìn Chuyên gia</h2>
                    <p>Cập nhật những phân tích chuyên sâu và đa chiều từ các chuyên gia đầu ngành.</p>
                </div>
                <div class="horizontal-scroll-wrapper">
                    <div class="experts-grid">
                    <article class="expert-card">
                        <div class="expert-avatar">
                            <a href="#"><img src="assets/images/avatar_1.jpeg" alt="Avatar Lương Thảo Nhi"></a>
                        </div>
                        <div class="expert-content">
                            <h3 class="expert-title"><a href="#">Khi các “ông lớn” FMCG cá nhân hóa trải nghiệm khách hàng mùa Tết 2025</a></h3>
                            <p class="expert-author">Lương Thảo Nhi</p>
                        </div>
                    </article>
                    <article class="expert-card">
                        <div class="expert-avatar">
                            <a href="#"><img src="assets/images/avatar_2.jpeg" alt="Avatar Lâm Hồng Lan"></a>
                        </div>
                        <div class="expert-content">
                            <h3 class="expert-title"><a href="#">Fashion Marketing #50: Triển vọng ngành thời trang toàn cầu năm 2025 và 10 điểm gợi ý trong việc phát triển chiến lược</a></h3>
                            <p class="expert-author">Lâm Hồng Lan</p>
                        </div>
                    </article>
                    <article class="expert-card">
                        <div class="expert-avatar">
                           <a href="#"><img src="assets/images/avatar_3.jpeg" alt="Avatar Lương Thảo Nhi"></a>
                        </div>
                        <div class="expert-content">
                            <h3 class="expert-title"><a href="#">Duolingo và bài học xây dựng thương hiệu từ Gamification trong lĩnh vực giáo dục</a></h3>
                            <p class="expert-author">Lương Thảo Nhi</p>
                        </div>
                    </article>
                    <article class="expert-card">
                        <div class="expert-avatar">
                           <a href="#"><img src="assets/images/avatar_4.jpeg" alt="Avatar Phạm Ngọc Linh"></a>
                        </div>
                        <div class="expert-content">
                            <h3 class="expert-title"><a href="#">Bắt nhịp biến động và khám phá tiềm năng OOH toàn cầu (báo cáo từ Statista)</a></h3>
                            <p class="expert-author">Phạm Ngọc Linh</p>
                        </div>
                    </article>
                </div>
                </div>
                
            </div>
        </section>
        
           <div class="main-container">
            <div class="content-limiter">
                <div class="section-header">
                    <h2>Tin tức nổi bật</h2>
                    <p>Những thông tin và sự kiện nóng hổi nhất trong tuần.</p>
                </div>

                <div class="featured-news-grid">
                    <article class="featured-post-large"></article>
                    <div class="secondary-posts"></div>
                </div>

              
            </div>
        </div>
         <section class="projects-section">
            <div class="content-limiter">
                <div class="section-header">
                    <h2>Dự án nổi bật</h2>
                    <p>Khám phá những dự án đáng chú ý và tiềm năng nhất hiện nay.</p>
                </div>
                <div class="horizontal-scroll-wrapper">
                    <div class="projects-grid">
                    <a href="du-an-chi-tiet.html" class="project-card" style="background-image: url('assets/images/duan1.jpg');">
                        <div class="project-card-content">
                            <h3 class="project-name">Dự án 1</h3>
                            <p class="project-address">Quận 2, TP. Thủ Đức, TP.HCM</p>
                            <p class="project-price">Từ 3 - 5 tỷ</p>
                            <span class="btn-project-detail">Xem chi tiết</span>
                        </div>
                    </a>
                    <a href="du-an-chi-tiet.html" class="project-card" style="background-image: url('assets/images/duan2.jpg');">
                        <div class="project-card-content">
                            <h3 class="project-name">Dự án 2</h3>
                            <p class="project-address">Quận Nam Từ Liêm, Hà Nội</p>
                            <p class="project-price">Từ 3 - 5 tỷ</p>
                            <span class="btn-project-detail">Xem chi tiết</span>
                        </div>
                    </a>
                    <a href="du-an-chi-tiet.html" class="project-card" style="background-image: url('assets/images/duan3.jpeg');">
                        <div class="project-card-content">
                            <h3 class="project-name">Dự án 3</h3>
                            <p class="project-address">Vinhomes Grand Park, TP. Thủ Đức, TP.HCM</p>
                            <p class="project-price">Từ 3 - 5 tỷ</p>
                            <span class="btn-project-detail">Xem chi tiết</span>
                        </div>
                    </a>
                    </div>
                </div>
                
            </div>
        </section>
         <section class="developers-section">
            <div class="content-limiter">
                <div class="section-header">
                    <h2>Chủ đầu tư nổi bật</h2>
                    <p>Các đối tác uy tín và danh tiếng hàng đầu trên thị trường bất động sản.</p>
                </div>
                <div class="developers-grid">
                    <a href="#" class="developer-card">
                        <img src="assets/images/logo1.png" alt="Logo Gamuda Land" class="developer-logo">
                        <span class="developer-name">Gamuda Land</span>
                    </a>
                    <a href="#" class="developer-card">
                        <img src="assets/images/logo2.png" alt="Logo Vinhomes" class="developer-logo">
                        <span class="developer-name">Vinhomes</span>
                    </a>
                    <a href="#" class="developer-card">
                        <img src="assets/images/logo3.png" alt="Logo Hưng Thịnh" class="developer-logo">
                        <span class="developer-name">Hưng Thịnh</span>
                    </a>
                    <a href="#" class="developer-card">
                        <img src="assets/images/logo4.png" alt="Logo Novaland" class="developer-logo">
                        <span class="developer-name">Novaland</span>
                    </a>
                    <a href="#" class="developer-card">
                        <img src="assets/images/logo5.png" alt="Logo Hà Đô" class="developer-logo">
                        <span class="developer-name">Hà Đô</span>
                    </a>
                </div>
            </div>
        </section>
         <section class="press-section">
            <div class="content-limiter">
                <div class="section-header">
                    <h2>Báo chí nói về chúng tôi</h2>
                    <p>Những đánh giá và câu chuyện từ các trang tin tức uy tín hàng đầu Việt Nam.</p>
                </div>
            </div>
            
            <div class="press-grid-wrapper">
                <div class="press-grid">
                    <a href="#" class="press-card">
                        <div class="press-card-image">
                            <img src="assets/images/baochi1.jpg" alt="Bài báo về nền tảng tra cứu pháp lý">
                        </div>
                        <div class="press-card-content">
                            <img src="assets/images/logo-vnexpress.png" alt="Logo VnExpress" class="press-logo">
                            <h3 class="press-title">BĐS Tốt ra mắt nền tảng tra cứu pháp lý bất động sản minh bạch</h3>
                        </div>
                    </a>
                    <a href="#" class="press-card">
                        <div class="press-card-image">
                            <img src="assets/images/baochi2.jpg" alt="Bài báo về gọi vốn thành công">
                        </div>
                        <div class="press-card-content">
                            <img src="assets/images/logo-cafef.png" alt="Logo CafeF" class="press-logo">
                            <h3 class="press-title">Startup BĐS Tốt gọi vốn thành công, định giá hàng triệu đô</h3>
                        </div>
                    </a>
                    <a href="#" class="press-card">
                        <div class="press-card-image">
                            <img src="assets/images/baochi3.jpg" alt="Bài báo về giải pháp công nghệ">
                        </div>
                        <div class="press-card-content">
                            <img src="assets/images/logo-tuoitre.png" alt="Logo Tuổi Trẻ" class="press-logo">
                            <h3 class="press-title">Giải pháp công nghệ từ BĐS Tốt giúp người mua nhà an tâm</h3>
                        </div>
                    </a>
                    <a href="#" class="press-card">
                        <div class="press-card-image">
                             <img src="assets/images/baochi4.jpg" alt="Bài báo về thị trường địa ốc">
                        </div>
                        <div class="press-card-content">
                             <img src="assets/images/logo-thanhnien.png" alt="Logo Thanh Niên" class="press-logo">
                            <h3 class="press-title">Thị trường địa ốc cần những nền tảng minh bạch như BĐS Tốt</h3>
                        </div>
                    </a>
                </div>
                
            </div>
        </section>
        <section class="contact-section">
            <div class="content-limiter">
                <div class="contact-grid">
                    <div class="contact-info">
                        <h2>BĐS Tốt - Giải Pháp Tìm Kiếm Bất Động Sản Hoàn Hảo, Miễn Phí 100%</h2>
                        <p>Bạn đang tìm kiếm chung cư? Hãy để lại thông tin, chuyên gia của BĐS Tốt sẽ liên hệ tư vấn MIỄN PHÍ giúp bạn tìm được sản phẩm ưng ý nhất.</p>
                        
                        <ul class="contact-details-list">
                            <li>
                               <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"></path>
                                </svg>
                                <a href="tel:0909123456">0909 123 456</a>
                            </li>
                            <li>
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                                    <path d="M.05 3.555A2 2 0 0 1 2 2h12a2 2 0 0 1 1.95 1.555L8 8.414.05 3.555zM0 4.697v7.104l5.803-3.558L0 4.697zM6.761 8.83l-6.57 4.027A2 2 0 0 0 2 14h12a2 2 0 0 0 1.808-1.144l-6.57-4.027L8 9.586l-1.239-.757zm3.436-.586L16 11.801V4.697l-5.803 3.546z"/>
                                </svg>
                                <a href="mailto:contact@bdstot.net">contact@bdstot.net</a>
                            </li>
                           
                        </ul>
                    </div>
                    <div class="contact-form-wrapper">
                        <form class="contact-form" id="home-contact-form">
                            <input type="text" name="name" placeholder="Họ và tên của bạn" required>
                            <input type="tel" name="phone" placeholder="Số điện thoại" required>
                            <input type="email" name="email" placeholder="Địa chỉ email (tùy chọn)">
                            <textarea name="message" rows="4" placeholder="Nhu cầu của bạn (ví dụ: tìm chung cư 2PN, tài chính 3 tỷ...)"></textarea>
                            <button type="submit" class="btn-primary">Gửi thông tin</button>
                            <p class="form-privacy-note">BĐS Tốt cam kết tuyệt đối không sử dụng thông tin của bạn để bán hoặc cho thuê.</p>
                        </form>
                    </div>
                </div>
            </div>
        </section>

    </main>
    
    <div id="favorites-drawer-container">
        <div class="favorites-drawer-overlay"></div>
        <div class="favorites-drawer">
            <div class="drawer-header">
                <h3>Danh sách yêu thích</h3>
                <button class="drawer-close-btn" title="Đóng">&times;</button>
            </div>
            <div class="drawer-content">
                </div>
            
        </div>
    </div>
    <footer class="footer-wrapper">
        <div class="header-footer-limiter">
            <div class="site-footer">
                <div class="footer-widget footer-col-1">
                     <a href="index.html">
                        <img src="assets/images/logo-footer.png" alt="Logo Footer" class="footer-logo">
                    </a>
                    <p><b>BDSTot.net - Bất Động Sản Tốt</b></p>
                    <p>Số điện thoại: <a href="tel:0123456789">0123 456 789</a></p>
                    <p>Mail: <a href="mailto:contact@bdstot.net">contact@bdstot.net</a></p>
                    
                </div>

                <div class="footer-widget">
                    <h4 class="widget-title accordion-toggle">VỀ CHÚNG TÔI</h4>
                    <ul class="widget-links">
                        <li><a href="gioi-thieu.html">Giới thiệu</a></li>
                        <li><a href="doi-ngu.html">Đội ngũ</a></li>
                        <li><a href="lien-he.html">Liên hệ</a></li>
                    </ul>
                </div>

                <div class="footer-widget">
                    <h4 class="widget-title accordion-toggle">ĐIỀU KHOẢN</h4>
                    <ul class="widget-links">
                        <li><a href="chinh-sach-bao-mat.html">Chính sách bảo mật</a></li>
                        <li><a href="dieu-khoan-su-dung.html">Điều khoản sử dụng</a></li>
                    </ul>
                </div>

                <div class="footer-widget footer-col-4">
                    <h4 class="widget-title">KẾT NỐI VỚI CHÚNG TÔI</h4>

                    <div class="footer-socials">
                        <a href="#" class="social-icon" aria-label="Facebook">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                <path d="M5 3h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2m13 2h-2.5a3.5 3.5 0 0 0-3.5 3.5V11h-2v3h2v7h3v-7h3v-3h-3V8.5A.5.5 0 0 1 15 8h3V5z"/>
                            </svg>
                        </a>
                        <a href="#" class="social-icon" aria-label="YouTube">
                            <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 24 24">
                                <path d="M10 15l5.19-3L10 9v6m11.56-7.83c.13.47.22 1.1.28 1.9.07.8.1 1.49.1 2.09L22 12c0 2.19-.16 3.8-.44 4.83-.25.9-.83 1.48-1.73 1.73-.47.13-1.33.22-2.65.28-1.3.07-2.49.1-3.59.1L12 19c-4.19 0-6.8-.16-7.83-.44-.9-.25-1.48-.83-1.73-1.73-.13-.47-.22-1.1-.28-1.9-.07-.8-.1-1.49-.1-2.09L2 12c0-2.19.16-3.8.44-4.83.25-.9.83-1.48 1.73-1.73.47-.13 1.33.22 2.65.28 1.3.07 2.49.1 3.59.1L12 5c4.19 0 6.8.16 7.83.44.9.25 1.48.83 1.73 1.73z"/>
                            </svg>
                        </a>
                        <a href="#" class="social-icon" aria-label="LinkedIn">
                            <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 24 24" fill="white">
                                <path d="M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14m-.5 15.5v-5.3a3.26 3.26 0 0 0-3.26-3.26c-.85 0-1.84.52-2.32 1.3v-1.11h-2.79v8.37h2.79v-4.93c0-.77.62-1.4 1.39-1.4s1.39.63 1.39 1.4v4.93h2.8zM6.88 8.56a1.68 1.68 0 0 0 1.68-1.68c0-.93-.75-1.69-1.68-1.69s-1.68.76-1.68 1.69c0 .92.75 1.68 1.68 1.68zm-1.39 1.3h2.79v8.37H5.5V9.86z"/>
                            </svg>
                        </a>
                    </div>

                    <a href="#" target="_blank" rel="noopener noreferrer" style="margin-top: 20px; display: inline-block;">
                        <img src="assets/images/bo-cong-thuong.png" alt="Logo Bộ Công Thương" class="bct-logo">
                    </a>
                </div>
            </div>
             <div class="copyright-text">
                <p>Copyright 2025 - Bản quyền của BĐS Tốt</p>
            </div>
        </div>
    </footer>
   
    
 
  
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // 1. Chọn đúng form trên trang chủ bằng ID vừa thêm
        const homeContactForm = document.getElementById('home-contact-form');
        
        // Nếu trang không có form này thì không làm gì cả
        if (!homeContactForm) {
            return;
        }

        const formContainer = homeContactForm.parentElement;

        // 2. Lắng nghe sự kiện khi người dùng gửi form
        homeContactForm.addEventListener('submit', function(event) {
            // Ngăn trình duyệt tải lại trang
            event.preventDefault();

            // 3. Ẩn form đi
            homeContactForm.style.display = 'none';

            // 4. Tạo và hiển thị thông báo thành công
            let successMessage = formContainer.querySelector('.form-success-message');
            if (!successMessage) {
                successMessage = document.createElement('div');
                successMessage.className = 'form-success-message';
                formContainer.appendChild(successMessage);
            }
            
            successMessage.innerHTML = `
                <h3>Cảm ơn bạn!</h3>
                <p>Chúng tôi đã nhận được thông tin và sẽ liên hệ lại trong thời gian sớm nhất.</p>
            `;
            
            successMessage.style.display = 'block';
        });
    });
    </script>
    <script type="module" src="assets/js/data-menu.js"></script>
  
    <script src="assets/js/news-data.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="assets/js/main.js"></script>
    <script src="assets/js/listing.js"></script> 
    <script type="module">
    // =====================================================================
    // == SCRIPT TỔNG HỢP CUỐI CÙNG (DESKTOP & MOBILE & STICKY HEADER) ==
    // =====================================================================

    document.addEventListener('DOMContentLoaded', () => {

        // --- PHẦN 1: DỮ LIỆU & BIẾN TOÀN CỤC ---
        const initialMenuData = {
           "Dự án": [ { "Loại hình": "Chung cư", "Khu vực": ["TP. Hồ Chí Minh", "Bình Dương", "Đồng Nai", "Hà Nội", "Long An", "Bà Rịa - Vũng Tàu", "Lâm Đồng", "Đà Nẵng", "Vĩnh Long"] }, { "Loại hình": "Khu đô thị", "Khu vực": ["TP. Hồ Chí Minh", "Hà Nội", "Long An"] } ],
           "Mua bán": [ { "Loại hình": "Căn hộ", "Khu vực": ["Hà Nội", "Hải Phòng", "Đà Nẵng", "Cần Thơ", "TP. Hồ Chí Minh", "Hà Giang", "Cao Bằng", "Lào Cai", "Sơn La", "Quảng Ninh", "Bắc Ninh", "Hưng Yên", "Ninh Bình", "Thanh Hóa", "Nghệ An", "Hà Tĩnh", "Quảng Bình", "Thừa Thiên Huế", "Quảng Nam", "Bình Định", "Khánh Hòa", "Ninh Thuận", "Bình Thuận", "Kon Tum", "Gia Lai", "Đắk Lắk", "Đắk Nông", "Lâm Đồng", "Bình Phước", "Tây Ninh", "Bình Dương", "Đồng Nai", "Bà Rịa - Vũng Tàu", "Long An", "Tiền Giang", "Bến Tre", "Đồng Tháp", "An Giang", "Kiên Giang", "Cà Mau"] }, { "Loại hình": "Shophouse", "Khu vực": ["TP. Hồ Chí Minh", "Hà Nội", "Đà Nẵng"] } ],
           "Cho thuê": [ { "Loại hình": "Căn hộ", "Khu vực": ["Hà Nội", "Hải Phòng", "Đà Nẵng", "Cần Thơ", "TP. Hồ Chí Minh", "Hà Giang", "Cao Bằng", "Lào Cai", "Sơn La", "Quảng Ninh", "Bắc Ninh", "Hưng Yên", "Ninh Bình", "Thanh Hóa", "Nghệ An", "Hà Tĩnh", "Quảng Bình", "Thừa Thiên Huế", "Quảng Nam", "Bình Định", "Khánh Hòa", "Ninh Thuận", "Bình Thuận", "Kon Tum", "Gia Lai", "Đắk Lắk", "Đắk Nông", "Lâm Đồng", "Bình Phước", "Tây Ninh", "Bình Dương", "Đồng Nai", "Bà Rịa - Vũng Tàu", "Long An", "Tiền Giang", "Bến Tre", "Đồng Tháp", "An Giang", "Kiên Giang", "Cà Mau"] }, { "Loại hình": "Shophouse", "Khu vực": ["TP. Hồ Chí Minh", "Hà Nội", "Vĩnh Long"] } ],
           "Wiki": [ { "Danh mục": "Pháp lý", "slug": "phap-ly" }, { "Danh mục": "Kinh nghiệm", "slug": "kinh-nghiem" }, { "Danh mục": "Phong thuỷ", "slug": "phong-thuy" } ],
           "Tin tức": [ { "Danh mục": "Dự án", "slug": "du-an" }, { "Danh mục": "Thị trường", "slug": "thi-truong" } ],
           "Doanh nghiệp": [ { "Danh mục": "Chủ đầu tư", "slug": "chu-dau-tu" }, { "Danh mục": "Nhà thầu thi công", "slug": "nha-thau-thi-cong" } ]
        };
        
        const featuredProjectsData = [
            {
                name: 'The Global City',
                description: 'Khu đô thị phức hợp chuẩn quốc tế tại TP. Thủ Đức.',
                image: 'assets/images/project-gallery-1.jpg',
                link: '#'
            },
            {
                name: 'Vinhomes Grand Park',
                description: 'Đại đô thị thông minh đẳng cấp quốc tế tại TP. Thủ Đức.',
                image: 'assets/images/duan3.jpeg',
                link: '#'
            },
            {
                name: 'Aqua City',
                description: 'Khu đô thị sinh thái thông minh phía Đông TP.HCM.',
                image: 'assets/images/duan1.jpg',
                link: '#'
            }
        ];

        const header = document.querySelector('.header-wrapper');
        const mainMenuContainer = document.getElementById('main-nav');
        const mainMenuUl = document.getElementById('main-menu-list');
        const hamburgerButton = document.getElementById('hamburger-button');
        const menuOverlay = document.getElementById('menu-overlay');
        const megaMenuContainer = document.getElementById('cct-mega-menu');
        
        let activeMenuItem = null;
        let isMouseOverMenu = false;
        let currentLayoutMode = '';
        
        // --- PHẦN 2: CÁC HÀM TIỆN ÍCH ---

        function getScrollbarWidth() {
            const outer = document.createElement('div');
            outer.style.visibility = 'hidden';
            outer.style.overflow = 'scroll';
            document.body.appendChild(outer);
            const scrollbarWidth = outer.offsetWidth - outer.clientWidth;
            document.body.removeChild(outer);
            return scrollbarWidth;
        }

        const scrollbarWidth = getScrollbarWidth();

        const normalizeText = (str) => {
            if (!str) return '';
            return str.toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g, '').replace(/[đĐ]/g, 'd');
        };

        const toSlug = (str) => {
            if (!str) return '';
            let s = normalizeText(str);
            if (s === 'tp ho chi minh') return 'tp-ho-chi-minh';
            if (s === 'ha noi') return 'tp-ha-noi';
            if (s === 'da nang') return 'tp-da-nang';
            if (s === 'can tho') return 'tp-can-tho';
            if (s === 'hai phong') return 'tp-hai-phong';
            s = s.replace(/([^0-9a-z-\s])/g, '');
            s = s.replace(/(\s+)/g, '-');
            s = s.replace(/-+/g, '-');
            s = s.replace(/^-+|-+$/g, '');
            return s;
        };
        
        function getLink(menuKey, catKey, subItem) {
            let baseUrl = '';
            let params = [];
            const lowerMenuKey = menuKey.toLowerCase();
            const categorySlug = toSlug(catKey);
            if (lowerMenuKey.includes('dự án'))
            baseUrl = 'list-du-an.html';
            else if (lowerMenuKey.includes('bán')) baseUrl = 'listing-ban.html';
            else if (lowerMenuKey.includes('thuê')) baseUrl = 'listing-thue.html';
            else if (lowerMenuKey.includes('wiki')) baseUrl = 'wiki.html';
            else if (lowerMenuKey.includes('tin tức')) baseUrl = 'news.html';
            else if (lowerMenuKey.includes('doanh nghiệp')) baseUrl = 'business.html';
            else baseUrl = 'listing.html';
            if (catKey) {
                let paramKey = ['Dự án', 'Mua bán', 'Cho thuê'].includes(menuKey) ? 'loaihinh' : 'danh-muc';
                params.push(`${paramKey}=${categorySlug}`);
            }
            if (subItem) {
                params.push(`thanhpho=${toSlug(subItem)}`);
            }
            return `${baseUrl}${params.length > 0 ? '?' : ''}${params.join('&')}`;
        }

        function debounce(func, delay = 250) {
            let timeout;
            return (...args) => { clearTimeout(timeout); timeout = setTimeout(() => func.apply(this, args), delay); };
        }

        // --- PHẦN 3: LOGIC MENU ---

        function initMenu() {
            const newLayoutMode = window.innerWidth > 1024 ? 'desktop' : 'mobile';
            
            if (newLayoutMode !== currentLayoutMode) {
                currentLayoutMode = newLayoutMode;
                if (newLayoutMode === 'desktop') {
                    handleDesktopMenu();
                } else {
                    handleMobileMenu();
                }
            }
        }
        
        function handleDesktopMenu() {
            const nav = document.getElementById('main-nav');
            const mainMenu = document.getElementById('main-menu-list');
            if (!nav || !mainMenu || !megaMenuContainer) return;

            mainMenu.innerHTML = ''; 
            for (const menuKey in initialMenuData) {
                const li = document.createElement('li');
                li.className = 'has-dropdown';
                const a = document.createElement('a');
                a.href = '#'; 
                a.textContent = menuKey;
                li.appendChild(a);
                mainMenu.appendChild(li);

                // === THAY ĐỔI LOGIC KHÓA CUỘN 1: Khóa cuộn khi mở menu ===
                a.addEventListener('click', (e) => {
                    e.preventDefault();
                    if (activeMenuItem === e.target.parentElement) {
                        closeDesktopPanel();
                    } else {
                        // Khóa cuộn và bù trừ padding NGAY KHI mở menu
                        document.body.classList.add('scroll-locked');
                        document.body.style.paddingRight = `${scrollbarWidth}px`;
                        header.style.paddingRight = `${scrollbarWidth}px`;
                        
                        if (activeMenuItem) activeMenuItem.classList.remove('active');
                        activeMenuItem = e.target.parentElement;
                        activeMenuItem.classList.add('active');
                        populateDesktopPanel(menuKey);
                        setTimeout(() => megaMenuContainer.classList.add('is-open'), 10);
                    }
                });
            }
            
            // === THAY ĐỔI LOGIC KHÓA CUỘN 2: Đơn giản hóa mouseenter/mouseleave ===
            // Các sự kiện này bây giờ chỉ dùng để xác định vị trí chuột cho sự kiện scroll
            megaMenuContainer.addEventListener('mouseenter', () => {
                isMouseOverMenu = true;
            });
            megaMenuContainer.addEventListener('mouseleave', () => {
                isMouseOverMenu = false;
            });
        }

        function populateDesktopPanel(menuKey) {
            const menuItems = initialMenuData[menuKey];
            const col1Header = document.querySelector('#cct-mega-menu .menu-panel-col.col-1 h4');
            const col1List = document.getElementById('mega-menu-col-1-list');
            const col2List = document.getElementById('mega-menu-col-2-list');
            const col3Content = document.getElementById('mega-menu-col-3-content');

            if (!col1List || !col2List || !col3Content || !col1Header) return;
            
            col1List.innerHTML = '';
            col2List.innerHTML = '';
            col3Content.innerHTML = '';

            if (!menuItems || menuItems.length === 0) {
                col1Header.textContent = '';
                return;
            }

            const firstItem = menuItems[0];
            let col1Title = '';
            if (firstItem.hasOwnProperty('Loại hình')) {
                col1Title = 'Loại hình';
            } else if (firstItem.hasOwnProperty('Danh mục')) {
                col1Title = 'Danh mục';
            }
            col1Header.textContent = col1Title;

            const isMega = firstItem.hasOwnProperty('Khu vực');
            megaMenuContainer.querySelector('.menu-panel-columns').classList.toggle('is-single-col-data', !isMega);
            
            menuItems.forEach((item) => {
                const categoryName = item["Loại hình"] || item["Danh mục"];
                const li = document.createElement('li');
                li.dataset.category = categoryName;
                if (isMega) {
                    const link = document.createElement('a');
                    link.href = getLink(menuKey, categoryName);
                    link.textContent = categoryName;
                    link.dataset.action = 'show-sub-items';
                    li.appendChild(link);
                } else {
                    const link = document.createElement('a');
                    link.href = getLink(menuKey, categoryName);
                    link.textContent = categoryName;
                    link.className = 'direct-link';
                    li.appendChild(link);
                }
                col1List.appendChild(li);
            });

            if (isMega) {
                col1List.addEventListener('click', e => {
                    const targetLink = e.target.closest('a');
                    if (targetLink && targetLink.dataset.action === 'show-sub-items') {
                        e.preventDefault();
                        const targetLi = targetLink.parentElement;
                        if (targetLi && targetLi.dataset.category) {
                            if (targetLi.classList.contains('active')) return;
                            col1List.querySelectorAll('li').forEach(li => li.classList.remove('active'));
                            targetLi.classList.add('active');
                            updateDesktopSubMenu(targetLi.dataset.category, menuKey);
                        }
                    }
                });

                const firstItemLi = col1List.querySelector('li:first-child');
                if (firstItemLi) {
                    firstItemLi.classList.add('active');
                    const firstCategory = firstItemLi.dataset.category;
                    if (firstCategory) {
                        updateDesktopSubMenu(firstCategory, menuKey);
                    }
                }
            }
            
            featuredProjectsData.forEach(project => {
                const card = document.createElement('a');
                card.href = project.link;
                card.className = 'featured-project-card';
                card.innerHTML = `<img src="${project.image}" alt="${project.name}"><div class="featured-project-info"><h5>${project.name}</h5><p>${project.description}</p></div>`;
                col3Content.appendChild(card);
            });
        }
        
        function updateDesktopSubMenu(categoryKey, menuKey) {
            const subMenuContainer = document.getElementById('mega-menu-col-2-list');
            const menuItems = initialMenuData[menuKey];
            const targetItem = menuItems.find(item => item["Loại hình"] === categoryKey);
            const subItems = targetItem ? targetItem["Khu vực"] : [];
            
            subMenuContainer.innerHTML = '';

            const searchInput = document.createElement('input');
            searchInput.type = 'text';
            searchInput.placeholder = '🔍 Tìm kiếm khu vực...';
            searchInput.className = 'mega-menu-search';
            subMenuContainer.appendChild(searchInput);

            const listWrapper = document.createElement('div');
            listWrapper.className = 'mega-menu-list-wrapper';
            subMenuContainer.appendChild(listWrapper);

            const majorCities = ["TP. Hồ Chí Minh", "Hà Nội", "Đà Nẵng"];
            const majorGroup = subItems.filter(item => majorCities.includes(item));
            const otherGroup = subItems.filter(item => !majorCities.includes(item));

            let listHTML = '';
            if (majorGroup.length > 0) {
                listHTML += `<h5 class="mega-menu-group-title">Thành phố lớn</h5>`;
                listHTML += `<ul class="mega-menu-sub-list">` + majorGroup.map(item => `<li><a href="${getLink(menuKey, categoryKey, item)}">${item}</a></li>`).join('') + `</ul>`;
            }
            if (otherGroup.length > 0) {
                listHTML += `<h5 class="mega-menu-group-title">Các tỉnh thành khác</h5>`;
                listHTML += `<ul class="mega-menu-sub-list">` + otherGroup.map(item => `<li><a href="${getLink(menuKey, categoryKey, item)}">${item}</a></li>`).join('') + `</ul>`;
            }
            listWrapper.innerHTML = listHTML;

            searchInput.addEventListener('input', (e) => {
                const searchTerm = normalizeText(e.target.value);
                const allListItems = listWrapper.querySelectorAll('li');
                const allGroupTitles = listWrapper.querySelectorAll('.mega-menu-group-title');

                allListItems.forEach(li => {
                    const text = normalizeText(li.textContent);
                    li.style.display = text.includes(searchTerm) ? '' : 'none';
                });

                allGroupTitles.forEach(title => {
                    const nextList = title.nextElementSibling;
                    const hasVisibleItems = nextList && nextList.querySelector('li[style=""]');
                    title.style.display = hasVisibleItems ? '' : 'none';
                });
            });
        }

        function closeDesktopPanel() {
            if (megaMenuContainer) megaMenuContainer.classList.remove('is-open');
            if (activeMenuItem) {
                activeMenuItem.classList.remove('active');
                activeMenuItem = null;
            }
            // === THAY ĐỔI LOGIC KHÓA CUỘN 3: Mở khóa cuộn khi đóng menu ===
            document.body.classList.remove('scroll-locked');
            document.body.style.paddingRight = '';
            header.style.paddingRight = '';
            isMouseOverMenu = false;
        }

        function handleMobileMenu() {
            const nav = document.getElementById('main-nav');
            const overlay = document.getElementById('menu-overlay');
            const hamburger = document.getElementById('hamburger-button');
            if (!nav || !overlay || !hamburger) return;

            nav.innerHTML = '<div class="menu-slider"></div>';
            const slider = nav.querySelector('.menu-slider');

            const createPanel = (level, title, listContent, extraHeaderContent = '') => {
                const panel = document.createElement('div');
                panel.className = 'menu-panel';
                panel.dataset.level = level;
                let headerHTML = `<h4 class="panel-title">${title}</h4>`;
                if (level > 0) {
                    headerHTML = `<a href="#" class="panel-back-button"><svg fill="currentColor" viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"></path></svg></a>` + headerHTML;
                } else {
                    headerHTML += `<button class="mobile-menu-close">&times;</button>`;
                }
                panel.innerHTML = `<div class="panel-header">${headerHTML}</div>${extraHeaderContent}<ul class="panel-list">${listContent}</ul>`;
                return panel;
            };

            const openMenu = () => {
                if (!slider.querySelector('[data-level="0"]')) {
                    const level1Content = Object.keys(initialMenuData).map(key => `<li class="has-submenu" data-level="0" data-key="${key}"><a href="#">${key}</a></li>`).join('');
                    const panel1 = createPanel(0, 'Menu', level1Content);
                    slider.appendChild(panel1);
                    panel1.querySelector('.mobile-menu-close').addEventListener('click', closeMenu);
                }
                nav.classList.add('is-open');
                overlay.classList.add('is-visible');
                document.body.style.overflow = 'hidden';
            };

            const closeMenu = () => {
                nav.classList.remove('is-open');
                overlay.classList.remove('is-visible');
                document.body.style.overflow = '';
                setTimeout(() => {
                    slider.style.transform = 'translateX(0%)';
                    slider.querySelectorAll('.menu-panel').forEach(p => { if (p.dataset.level > 0) p.remove(); });
                }, 350);
            };

            hamburger.onclick = openMenu;
            overlay.onclick = closeMenu;

            slider.addEventListener('click', (e) => {
                const linkTarget = e.target.closest('a');
                if (linkTarget && linkTarget.getAttribute('href') !== '#') {
                    closeMenu();
                    return;
                }
                e.preventDefault();
                const target = e.target;
                const currentPanel = target.closest('.menu-panel');
                if (!currentPanel) return;

                if (target.closest('.panel-back-button')) {
                    const currentLevel = parseInt(currentPanel.dataset.level, 10);
                    slider.style.transform = `translateX(-${(currentLevel - 1) * 100}%)`;
                    setTimeout(() => currentPanel.remove(), 350);
                    return;
                }

                const targetLi = target.closest('li[data-key]');
                if (targetLi) {
                    if(e.target.closest('a')?.getAttribute('href') === '#') { e.preventDefault(); }
                    const level = parseInt(targetLi.dataset.level, 10);
                    const menuKey = targetLi.dataset.key;
                    const category = targetLi.dataset.category;
                    let nextLevelContent = '', nextLevelTitle = '', extraHeader = '';
                    
                    if (level === 0) {
                        nextLevelTitle = menuKey;
                        const items = initialMenuData[menuKey];
                        nextLevelContent = items.map(item => {
                            const name = item["Loại hình"] || item["Danh mục"];
                            const hasSubmenu = item.hasOwnProperty('Khu vực');
                            const link = hasSubmenu ? '#' : getLink(menuKey, name, null);
                            return `<li class="${hasSubmenu ? 'has-submenu' : ''}" data-level="1" data-key="${menuKey}" data-category="${name}"><a href="${link}">${name}</a></li>`;
                        }).join('');
                    } else if (level === 1) {
                        const parentItem = initialMenuData[menuKey].find(item => (item["Loại hình"] || item["Danh mục"]) === category);
                        if (!parentItem || !parentItem["Khu vực"]) return;
                        nextLevelTitle = category;
                        const khuVucItems = parentItem["Khu vực"];
                        nextLevelContent = khuVucItems.map(kv => `<li><a href="${getLink(menuKey, category, kv)}">${kv}</a></li>`).join('');
                        
                        extraHeader = `<div class="panel-search-wrapper"><input type="text" class="mobile-menu-search" placeholder="🔍 Tìm kiếm khu vực..."></div>`;
                    }

                    if (nextLevelContent) {
                        const newPanel = createPanel(level + 1, nextLevelTitle, nextLevelContent, extraHeader);
                        slider.appendChild(newPanel);
                        slider.style.transform = `translateX(-${(level + 1) * 100}%)`;

                        if (extraHeader) {
                            const searchInput = newPanel.querySelector('.mobile-menu-search');
                            const listItems = newPanel.querySelectorAll('.panel-list li');
                            searchInput.addEventListener('input', (event) => {
                                const searchTerm = normalizeText(event.target.value);
                                listItems.forEach(li => {
                                    const text = normalizeText(li.textContent);
                                    li.style.display = text.includes(searchTerm) ? '' : 'none';
                                });
                            });
                        }
                    }
                }
            });
        }
        
        if (header) {
            let lastScrollTop = 0;
            const sidebar = document.querySelector('.listing-filter-sidebar, .contact-sidebar, .sidebar-column'); 
            window.addEventListener('scroll', () => {
                let scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                if (scrollTop > lastScrollTop && scrollTop > header.offsetHeight) {
                    header.classList.add('header--hidden');
                    if (sidebar) sidebar.classList.add('sidebar--header-hidden');
                } else {
                    header.classList.remove('header--hidden');
                    if (sidebar) sidebar.classList.remove('sidebar--header-hidden');
                }
                lastScrollTop = scrollTop <= 0 ? 0 : scrollTop;

                if (megaMenuContainer && megaMenuContainer.classList.contains('is-open')) {
                    if (!isMouseOverMenu) {
                        closeDesktopPanel();
                    }
                }
            }, { passive: true });
        }

        document.addEventListener('click', (event) => {
            if (!megaMenuContainer || !megaMenuContainer.classList.contains('is-open')) {
                return;
            }
            const navTriggers = mainMenuContainer;
            const panelContent = megaMenuContainer.querySelector('.menu-panel-columns');
            if (navTriggers.contains(event.target) || (panelContent && panelContent.contains(event.target))) {
                return;
            }
            closeDesktopPanel();
        });

        window.addEventListener('resize', debounce(initMenu, 250));
        
        initMenu();
    });
</script>
    
</body>
</html>