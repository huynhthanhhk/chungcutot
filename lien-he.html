<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Liên hệ - Chung Cư Tốt</title>
    
    <link rel="icon" href="favicon.png" type="image/png">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="assets/css/menu.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/listing.css">

    <style>
        .contact-page .main-column {
            max-width: 1100px;
            margin: 0 auto;
        }
        .map-container {
            border-radius: 12px;
            overflow: hidden;
            line-height: 0; 
            border: 1px solid var(--border-color);
        }
    </style>
</head>
<body class="contact-page">

    <div id="menu-overlay" class="menu-overlay"></div>
    <header class="header-wrapper">
        <div class="header-footer-limiter">
            <div class="site-header">
                <button class="hamburger-button" id="hamburger-button" aria-label="Mở menu">
                    <span class="bar"></span><span class="bar"></span><span class="bar"></span>
                </button>
                <a href="index.html" class="logo-link"><img src="assets/images/logo.png" alt="Logo Chung Cư Tốt" class="logo"></a>
                <nav class="main-nav" id="main-nav">
                    <ul id="main-menu-list"></ul>
                </nav>
                <div class="header-actions">
                    <a href="favorites.html" class="header-favorite-btn" aria-label="Danh sách yêu thích">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"></path></svg>
                        <span class="favorite-counter">0</span>
                    </a>
                    <a href="#" class="search-button-new" aria-label="Tìm kiếm">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16"><path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/></svg>
                    </a>
                </div>
            </div>
        </div>
    </header>
    <div id="cct-mega-menu">
        <div class="menu-panel-overlay"></div>
        <div class="menu-panel-columns">
            <div class="menu-panel-col col-1"><h4>Loại hình</h4><ul id="mega-menu-col-1-list"></ul></div>
            <div class="menu-panel-col col-2"><h4>Khu vực</h4><ul id="mega-menu-col-2-list"></ul></div>
            <div class="menu-panel-col col-3"><h4>Dự án nổi bật</h4><div id="mega-menu-col-3-content"></div></div>
        </div>
    </div>

    <div class="main-container">
        <div class="content-limiter">
            <div class="main-column">
                <div class="breadcrumb">
                    Về chúng tôi &gt; <span>Liên hệ</span>
                </div>
                
                <section class="contact-section" style="padding: 0; background: none;">
                    <div class="contact-grid">
                        <div class="contact-info">
                            <h2>Liên hệ với chúng tôi</h2>
                            <p>Chúng tôi luôn sẵn sàng lắng nghe từ bạn. Vui lòng sử dụng biểu mẫu bên cạnh hoặc liên hệ trực tiếp với chúng tôi qua thông tin dưới đây.</p>
                            <ul class="contact-details-list">
                                <li>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16"><path d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6z"/></svg>
                                    <span>Toà Rs2, Chung cư Richstar, 278  Tô Hiệu, Phú Thạnh, TP. Hồ Chí Minh</span>
                                </li>
                                <li>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"></path>
                                    </svg>
                                    <a href="tel:0123456789">0123 456 789</a>
                                </li>
                                <li>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16"><path d="M.05 3.555A2 2 0 0 1 2 2h12a2 2 0 0 1 1.95 1.555L8 8.414.05 3.555ZM0 4.697v7.104l5.803-3.558L0 4.697ZM6.761 8.83l-6.57 4.027A2 2 0 0 0 2 14h12a2 2 0 0 0 1.808-1.144l-6.57-4.027L8 9.586l-1.239-.757Zm3.436-.586L16 11.801V4.697l-5.803 3.546Z"/></svg>
                                    <a href="mailto:info@chungcutot.vn">info@chungcutot.vn</a>
                                </li>
                            </ul>
                        </div>
                        <div class="contact-form-wrapper">
                            <form class="contact-form">
                                <input type="text" name="name" placeholder="Họ và tên của bạn" required>
                                <input type="email" name="email" placeholder="Email" required>
                                <input type="tel" name="phone" placeholder="Số điện thoại">
                                <textarea name="message" rows="5" placeholder="Nội dung bạn muốn trao đổi..." required></textarea>
                                <button type="submit" class="btn-primary">Gửi tin nhắn</button>
                            </form>
                            <div class="form-success-message">
                                <h3>Gửi thành công!</h3>
                                <p>Cảm ơn bạn đã liên hệ. Chúng tôi sẽ phản hồi sớm nhất có thể.</p>
                            </div>
                            </div>
                    </div>
                </section>
                
                <section class="map-section" style="margin-top: 50px;">
                    <div class="map-container">
                       <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3919.447982333658!2d106.7013342152835!3d10.776989492320793!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x31752f4939ffc909%3A0x8be4e52f5342378a!2zQml0ZXhjbyBGaW5hbmNpYWwgVG93ZXIsIDE5IEjhu5MgVMO5bmcgTeG6rXUsIEPhuqd1IFRoxpLDqm0sIFF14bqtbiAxLCBUaMOgbmggcGjhu5EgSOG7kyBDaMOtIE1pbmgsIFZpZXRuYW0!5e0!3m2!1sen!2s!4v1657888888888!5m2!1sen!2s" width="100%" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                    </div>
                </section>
            </div>
        </div>
    </div>
    <div id="favorites-drawer-container">
        <div class="favorites-drawer-overlay"></div>
        <div class="favorites-drawer">
            <div class="drawer-header">
                <h3>Danh sách yêu thích</h3>
                <button class="drawer-close-btn" title="Đóng">&times;</button>
            </div>
            <div class="drawer-content">
                </div>
            
        </div>
    </div>
    <footer class="footer-wrapper">
        <div class="header-footer-limiter">
            <div class="site-footer">
                <div class="footer-widget footer-col-1">
                     <a href="index.html"><img src="assets/images/logo-footer.png" alt="Logo Footer" class="footer-logo"></a>
                    <p><b>BDSTot.net</b></p>
               		<p>Số điện thoại: <a href="tel:0123456789">0123 456 789</a></p>
                    <p>Mail: <a href="mailto:info@bdstot.net">info@bdstot.net</a></p>
                </div>
                <div class="footer-widget">
                    <h4 class="widget-title accordion-toggle">VỀ CHÚNG TÔI</h4>
                    <ul class="widget-links">
                        <li><a href="gioi-thieu.html">Giới thiệu</a></li>
                        <li><a href="doi-ngu.html">Đội ngũ</a></li>
                        <li><a href="lien-he.html">Liên hệ</a></li>
                    </ul>
                </div>
                <div class="footer-widget">
                    <h4 class="widget-title accordion-toggle">ĐIỀU KHOẢN</h4>
                    <ul class="widget-links">
                        <li><a href="chinh-sach-bao-mat.html">Chính sách bảo mật</a></li>
                        <li><a href="dieu-khoan-su-dung.html">Điều khoản sử dụng</a></li>
                    </ul>
                </div>
                <div class="footer-widget footer-col-4">
                     <a href="#" target="_blank" rel="noopener noreferrer"><img src="assets/images/bo-cong-thuong.png" alt="Logo Bộ Công Thương" class="bct-logo"></a>
                </div>
            </div>
             <div class="copyright-text">
                <p>Copyright 2025 - Bản quyền của BĐS Tốt</p>
            </div>
        </div>
    </footer>
    
    
    <script src="assets/js/template.js"></script>
    <script type="module" src="assets/js/data-menu.js"></script>
    <script src="assets/js/main.js"></script>
    <script src="assets/js/listing.js"></script> 

    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const contactForm = document.querySelector('.contact-form');
            const successMessage = document.querySelector('.form-success-message');

            if (contactForm && successMessage) {
                contactForm.addEventListener('submit', function(event) {
                    event.preventDefault(); // Ngăn form gửi đi theo cách truyền thống

                    // Ẩn form và hiện thông báo thành công
                    this.style.display = 'none';
                    successMessage.style.display = 'block';
                });
            }
        });
    </script>
    <script type="module">
    // =====================================================================
    // == SCRIPT TỔNG HỢP CUỐI CÙNG (DESKTOP & MOBILE & STICKY HEADER) ==
    // =====================================================================

    document.addEventListener('DOMContentLoaded', () => {

        // --- PHẦN 1: DỮ LIỆU & BIẾN TOÀN CỤC ---
        const initialMenuData = {
           "Dự án": [ { "Loại hình": "Chung cư", "Khu vực": ["TP. Hồ Chí Minh", "Bình Dương", "Đồng Nai"] }, { "Loại hình": "Khu đô thị", "Khu vực": ["TP. Hồ Chí Minh", "Hà Nội", "Long An"] } ],
           "Mua bán": [ { "Loại hình": "Căn hộ", "Khu vực": ["TP. Hồ Chí Minh", "Lâm Đồng", "Bà Rịa - Vũng Tàu"] }, { "Loại hình": "Shophouse", "Khu vực": ["TP. Hồ Chí Minh", "Hà Nội", "Đà Nẵng"] } ],
           "Cho thuê": [ { "Loại hình": "Căn hộ", "Khu vực": ["TP. Hồ Chí Minh", "Hà Nội"] }, { "Loại hình": "Shophouse", "Khu vực": ["TP. Hồ Chí Minh", "Hà Nội", "Vĩnh Long"] } ],
           "Wiki": [ { "Danh mục": "Pháp lý", "slug": "phap-ly" }, { "Danh mục": "Kinh nghiệm", "slug": "kinh-nghiem" }, { "Danh mục": "Phong thuỷ", "slug": "phong-thuy" } ],
           "Tin tức": [ { "Danh mục": "Dự án", "slug": "du-an" }, { "Danh mục": "Thị trường", "slug": "thi-truong" } ],
           "Doanh nghiệp": [ { "Danh mục": "Chủ đầu tư", "slug": "chu-dau-tu" }, { "Danh mục": "Nhà thầu thi công", "slug": "nha-thau-thi-cong" } ]
        };
        
        const featuredProjectsData = [
            {
                name: 'The Global City',
                description: 'Khu đô thị phức hợp chuẩn quốc tế tại TP. Thủ Đức.',
                image: 'assets/images/project-gallery-1.jpg',
                link: '#'
            }
        ];

        const header = document.querySelector('.header-wrapper');
        const mainMenuContainer = document.getElementById('main-nav');
        const mainMenuUl = document.getElementById('main-menu-list');
        const hamburgerButton = document.getElementById('hamburger-button');
        const menuOverlay = document.getElementById('menu-overlay');
        const megaMenuContainer = document.getElementById('cct-mega-menu');
        
        let activeMenuItem = null;
        let menuTimeout;

        // --- PHẦN 2: CÁC HÀM TIỆN ÍCH ---
        const toSlug = (str) => {
            if (!str) return '';
            let s = str.toLowerCase();
            if (s === 'hồ chí minh') return 'tp-ho-chi-minh';
            if (s === 'hà nội') return 'tp-ha-noi';
            if (s === 'đà nẵng') return 'tp-da-nang';
            if (s === 'cần thơ') return 'tp-can-tho';
            if (s === 'hải phòng') return 'tp-hai-phong';
            s = s.normalize('NFD').replace(/[\u0300-\u036f]/g, '');
            s = s.replace(/[đĐ]/g, 'd');
            s = s.replace(/([^0-9a-z-\s])/g, '');
            s = s.replace(/(\s+)/g, '-');
            s = s.replace(/-+/g, '-');
            s = s.replace(/^-+|-+$/g, '');
            return s;
        };
        
        function getLink(menuKey, catKey, subItem) {
            let baseUrl = '';
            let params = [];
            const lowerMenuKey = menuKey.toLowerCase();
            const categorySlug = toSlug(catKey);
            if (lowerMenuKey.includes('dự án'))
            baseUrl = 'list-du-an.html';
            else if (lowerMenuKey.includes('bán')) baseUrl = 'listing-ban.html';
            else if (lowerMenuKey.includes('thuê')) baseUrl = 'listing-thue.html';
            else if (lowerMenuKey.includes('wiki')) baseUrl = 'wiki.html';
            else if (lowerMenuKey.includes('tin tức')) baseUrl = 'news.html';
            else if (lowerMenuKey.includes('doanh nghiệp')) baseUrl = 'business.html';
            else baseUrl = 'listing.html';
            if (catKey) {
                let paramKey = ['Dự án', 'Mua bán', 'Cho thuê'].includes(menuKey) ? 'loaihinh' : 'danh-muc';
                params.push(`${paramKey}=${categorySlug}`);
            }
            if (subItem) {
                params.push(`thanhpho=${toSlug(subItem)}`);
            }
            return `${baseUrl}${params.length > 0 ? '?' : ''}${params.join('&')}`;
        }

        function debounce(func, delay = 250) {
            let timeout;
            return (...args) => { clearTimeout(timeout); timeout = setTimeout(() => func.apply(this, args), delay); };
        }

        // --- PHẦN 3: LOGIC MENU ---

        function initMenu() {
            if (window.innerWidth > 1024) {
                handleDesktopMenu();
            } else {
                handleMobileMenu();
            }
        }
        
        function handleDesktopMenu() {
            const nav = document.getElementById('main-nav');
            const mainMenu = document.getElementById('main-menu-list');
            if (!nav || !mainMenu || !megaMenuContainer) return;
            mainMenu.innerHTML = ''; 
            for (const menuKey in initialMenuData) {
                const li = document.createElement('li');
                li.className = 'has-dropdown';
                const a = document.createElement('a');
                a.href = '#'; 
                a.textContent = menuKey;
                li.appendChild(a);
                mainMenu.appendChild(li);
                a.addEventListener('click', (e) => {
                    e.preventDefault();
                    if (activeMenuItem === e.target.parentElement) {
                        closeDesktopPanel();
                    } else {
                        if (activeMenuItem) activeMenuItem.classList.remove('active');
                        activeMenuItem = e.target.parentElement;
                        activeMenuItem.classList.add('active');
                        populateDesktopPanel(menuKey);
                        setTimeout(() => megaMenuContainer.classList.add('is-open'), 10);
                    }
                });
            }
            megaMenuContainer.querySelector('.menu-panel-overlay')?.addEventListener('click', closeDesktopPanel);
            nav.addEventListener('mouseleave', () => { menuTimeout = setTimeout(closeDesktopPanel, 300); });
            nav.addEventListener('mouseenter', () => clearTimeout(menuTimeout));
            megaMenuContainer.addEventListener('mouseenter', () => clearTimeout(menuTimeout));
            megaMenuContainer.addEventListener('mouseleave', () => { menuTimeout = setTimeout(closeDesktopPanel, 300); });
        }

        // =======================================================
        // == HÀM ĐÃ ĐƯỢC CẬP NHẬT ĐẦY ĐỦ LOGIC MỚI NHẤT ==
        // =======================================================
        function populateDesktopPanel(menuKey) {
            const menuItems = initialMenuData[menuKey];
            const col1Header = document.querySelector('#cct-mega-menu .menu-panel-col.col-1 h4'); // --- ĐÃ THÊM ---
            const col1List = document.getElementById('mega-menu-col-1-list');
            const col2List = document.getElementById('mega-menu-col-2-list');
            const col3Content = document.getElementById('mega-menu-col-3-content');

            if (!col1List || !col2List || !col3Content || !col1Header) return; // --- ĐÃ SỬA ---
            
            col1List.innerHTML = '';
            col2List.innerHTML = '';
            col3Content.innerHTML = '';

            if (!menuItems || menuItems.length === 0) {
                col1Header.textContent = '';
                return;
            }

            // --- ĐÃ THÊM: LOGIC TỰ ĐỘNG ĐẶT TIÊU ĐỀ ---
            const firstItem = menuItems[0];
            let col1Title = '';
            if (firstItem.hasOwnProperty('Loại hình')) {
                col1Title = 'Loại hình';
            } else if (firstItem.hasOwnProperty('Danh mục')) {
                col1Title = 'Danh mục';
            }
            col1Header.textContent = col1Title;
            // --- KẾT THÚC PHẦN THÊM MỚI ---

            const isMega = firstItem.hasOwnProperty('Khu vực');
            megaMenuContainer.querySelector('.menu-panel-columns').classList.toggle('is-single-col-data', !isMega);
            
            menuItems.forEach((item, index) => {
                const categoryName = item["Loại hình"] || item["Danh mục"];
                const li = document.createElement('li');
                li.dataset.category = categoryName;
                if (isMega) {
                    li.textContent = categoryName;
                } else {
                    const link = document.createElement('a');
                    link.href = getLink(menuKey, categoryName);
                    link.textContent = categoryName;
                    link.className = 'direct-link';
                    li.appendChild(link);
                }
                if (index === 0) li.classList.add('active');
                col1List.appendChild(li);
            });

            if (isMega) {
                updateDesktopSubMenu(menuItems[0]["Loại hình"], menuKey);
                col1List.addEventListener('mouseover', e => {
                    const targetLi = e.target.closest('li');
                    if (targetLi && targetLi.dataset.category) {
                        col1List.querySelectorAll('li').forEach(li => li.classList.remove('active'));
                        targetLi.classList.add('active');
                        updateDesktopSubMenu(targetLi.dataset.category, menuKey);
                    }
                });
            }
            
            featuredProjectsData.forEach(project => {
                const card = document.createElement('a');
                card.href = project.link;
                card.className = 'featured-project-card';
                card.innerHTML = `<img src="${project.image}" alt="${project.name}"><div class="featured-project-info"><h5>${project.name}</h5><p>${project.description}</p></div>`;
                col3Content.appendChild(card);
            });
        }
        
        function updateDesktopSubMenu(categoryKey, menuKey) {
            const subMenuContainer = document.getElementById('mega-menu-col-2-list');
            const menuItems = initialMenuData[menuKey];
            const targetItem = menuItems.find(item => item["Loại hình"] === categoryKey);
            const subItems = targetItem ? targetItem["Khu vực"] : [];
            subMenuContainer.innerHTML = subItems.map(item => `<li><a href="${getLink(menuKey, categoryKey, item)}">${item}</a></li>`).join('');
        }

        function closeDesktopPanel() {
            if (megaMenuContainer) megaMenuContainer.classList.remove('is-open');
            if (activeMenuItem) {
                activeMenuItem.classList.remove('active');
                activeMenuItem = null;
            }
        }

        function handleMobileMenu() {
            const nav = document.getElementById('main-nav');
            const overlay = document.getElementById('menu-overlay');
            const hamburger = document.getElementById('hamburger-button');
            if (!nav || !overlay || !hamburger) return;
            nav.innerHTML = '<div class="menu-slider"></div>';
            const slider = nav.querySelector('.menu-slider');
            const createPanel = (level, title, content) => {
                const panel = document.createElement('div');
                panel.className = 'menu-panel';
                panel.dataset.level = level;
                let headerHTML = `<h4 class="panel-title">${title}</h4>`;
                if (level > 0) {
                    headerHTML = `<a href="#" class="panel-back-button"><svg fill="currentColor" viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"></path></svg></a>` + headerHTML;
                } else {
                    headerHTML += `<button class="mobile-menu-close">&times;</button>`;
                }
                panel.innerHTML = `<div class="panel-header">${headerHTML}</div><ul class="panel-list">${content}</ul>`;
                return panel;
            };
            const openMenu = () => {
                if (!slider.querySelector('[data-level="0"]')) {
                    const level1Content = Object.keys(initialMenuData).map(key => `<li class="has-submenu" data-level="0" data-key="${key}"><a href="#">${key}</a></li>`).join('');
                    const panel1 = createPanel(0, 'Menu', level1Content);
                    slider.appendChild(panel1);
                    panel1.querySelector('.mobile-menu-close').addEventListener('click', closeMenu);
                }
                nav.classList.add('is-open');
                overlay.classList.add('is-visible');
                document.body.style.overflow = 'hidden';
            };
            const closeMenu = () => {
                nav.classList.remove('is-open');
                overlay.classList.remove('is-visible');
                document.body.style.overflow = '';
                setTimeout(() => {
                    slider.style.transform = 'translateX(0%)';
                    slider.querySelectorAll('.menu-panel').forEach(p => { if (p.dataset.level > 0) p.remove(); });
                }, 350);
            };
            hamburger.onclick = openMenu;
            overlay.onclick = closeMenu;
            slider.addEventListener('click', (e) => {
                const linkTarget = e.target.closest('a');
                if (linkTarget && linkTarget.getAttribute('href') !== '#') {
                    closeMenu();
                    return;
                }
                e.preventDefault();
                const target = e.target;
                const currentPanel = target.closest('.menu-panel');
                if (!currentPanel) return;
                if (target.closest('.panel-back-button')) {
                    const currentLevel = parseInt(currentPanel.dataset.level, 10);
                    slider.style.transform = `translateX(-${(currentLevel - 1) * 100}%)`;
                    setTimeout(() => currentPanel.remove(), 350);
                    return;
                }
                const targetLi = target.closest('li[data-key]');
                if (targetLi) {
                    if(e.target.closest('a')?.getAttribute('href') === '#') { e.preventDefault(); }
                    const level = parseInt(targetLi.dataset.level, 10);
                    const menuKey = targetLi.dataset.key;
                    const category = targetLi.dataset.category;
                    let nextLevelContent = '', nextLevelTitle = '';
                    if (level === 0) {
                        nextLevelTitle = menuKey;
                        const items = initialMenuData[menuKey];
                        nextLevelContent = items.map(item => {
                            const name = item["Loại hình"] || item["Danh mục"];
                            const hasSubmenu = item.hasOwnProperty('Khu vực');
                            const link = hasSubmenu ? '#' : getLink(menuKey, name, null);
                            return `<li class="${hasSubmenu ? 'has-submenu' : ''}" data-level="1" data-key="${menuKey}" data-category="${name}"><a href="${link}">${name}</a></li>`;
                        }).join('');
                    }
                    else if (level === 1) {
                        const parentItem = initialMenuData[menuKey].find(item => (item["Loại hình"] || item["Danh mục"]) === category);
                        if (!parentItem || !parentItem["Khu vực"]) return;
                        nextLevelTitle = category;
                        const khuVucItems = parentItem["Khu vực"];
                        nextLevelContent = khuVucItems.map(kv => `<li><a href="${getLink(menuKey, category, kv)}">${kv}</a></li>`).join('');
                    }
                    if (nextLevelContent) {
                        const newPanel = createPanel(level + 1, nextLevelTitle, nextLevelContent);
                        slider.appendChild(newPanel);
                        slider.style.transform = `translateX(-${(level+1) * 100}%)`;
                    }
                }
            });
        }
        
        // --- PHẦN 4: CÁC SỰ KIỆN TOÀN CỤC ---
        if (header) {
            let lastScrollTop = 0;
            const sidebar = document.querySelector('.listing-filter-sidebar, .contact-sidebar, .sidebar-column'); 
            window.addEventListener('scroll', () => {
                let scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                if (scrollTop > lastScrollTop && scrollTop > header.offsetHeight) {
                    header.classList.add('header--hidden');
                    if (sidebar) sidebar.classList.add('sidebar--header-hidden');
                } else {
                    header.classList.remove('header--hidden');
                    if (sidebar) sidebar.classList.remove('sidebar--header-hidden');
                }
                lastScrollTop = scrollTop <= 0 ? 0 : scrollTop;
                if (megaMenuContainer && megaMenuContainer.classList.contains('is-open')) {
                    closeDesktopPanel();
                }
            });
        }

        document.addEventListener('click', (event) => {
            if (megaMenuContainer && mainMenuContainer && megaMenuContainer.classList.contains('is-open')) {
                if (!mainMenuContainer.contains(event.target) && !megaMenuContainer.contains(event.target)) {
                    closeDesktopPanel();
                }
            }
        });

        window.addEventListener('resize', debounce(initMenu, 250));
        
        // --- PHẦN 5: KHỞI CHẠY LẦN ĐẦU ---
        initMenu();
    });
    </script>
    </body>
</html>